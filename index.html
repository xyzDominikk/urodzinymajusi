<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>Urodziny â¤ï¸</title>

<style>
body{
font-family:Arial;
background:linear-gradient(135deg,#ff758c,#ff7eb3);
display:flex;
justify-content:center;
align-items:center;
height:100vh;
margin:0;
color:white;
text-align:center;
overflow:hidden;
}

.container{
background:rgba(0,0,0,0.35);
padding:40px;
border-radius:20px;
width:340px;
}

button{
padding:12px 20px;
border:none;
border-radius:10px;
font-size:16px;
cursor:pointer;
margin-top:15px;
}

button:disabled{
opacity:0.4;
cursor:not-allowed;
}

.letter{
position:fixed;
bottom:-100%;
left:50%;
transform:translateX(-50%);
width:350px;
background:white;
color:black;
padding:25px;
border-radius:15px;
transition:1s;
}

.letter.show{
bottom:50%;
transform:translate(-50%,50%);
}

canvas{
position:fixed;
top:0;
left:0;
pointer-events:none;
}

</style>

</head>

<body>

<canvas id="confetti"></canvas>

<div class="container">
<h1>ğŸ‚ Urodziny juÅ¼ za:</h1>
<div id="countdown">Åadowanie czasu z internetu...</div>

<button id="openBtn" onclick="openLetter()" disabled>
ğŸ”’ List zablokowany
</button>
</div>

<div id="letter" class="letter">
<h2>ğŸ’Œ List dla Ciebie</h2>
<p>
TU WPISZ SWÃ“J TEKST â¤ï¸
</p>
<button onclick="closeLetter()">Zamknij</button>
</div>

<audio id="music" src="muzyka.mp3"></audio>

<script>

// ğŸ“… DATA URODZIN (22 LUTY PÃ“ÅNOC)
const birthday = new Date(2026,1,22,0,0,0);

let internetOffset = 0;
let unlocked = false;

// ğŸŒ pobieranie czasu z internetu
async function syncTime(){
try{
const res = await fetch("https://worldtimeapi.org/api/ip");
const data = await res.json();
const internetNow = new Date(data.datetime);
internetOffset = internetNow - new Date();
}catch(e){
console.log("Brak internetu â€” fallback lokalny");
}
}

// â³ odliczanie
function updateCountdown(){

const now = new Date(new Date().getTime()+internetOffset);
const diff = birthday - now;

if(diff<=0 && !unlocked){

unlocked=true;

document.getElementById("countdown")
.innerText="ğŸ‰ Wszystkiego najlepszego!";

const btn=document.getElementById("openBtn");
btn.disabled=false;
btn.innerText="ğŸ’Œ OtwÃ³rz list";

startConfetti();
document.getElementById("music").play();

return;
}

if(diff>0){
const days=Math.floor(diff/(1000*60*60*24));
const hours=Math.floor((diff/(1000*60*60))%24);
const minutes=Math.floor((diff/(1000*60))%60);
const seconds=Math.floor((diff/1000)%60);

document.getElementById("countdown").innerText=
days+"d "+hours+"h "+minutes+"m "+seconds+"s";
}

}

setInterval(updateCountdown,1000);

// ğŸ’Œ list
function openLetter(){
document.getElementById("letter").classList.add("show");
}

function closeLetter(){
document.getElementById("letter").classList.remove("show");
}

// ğŸ‰ konfetti
const canvas=document.getElementById("confetti");
const ctx=canvas.getContext("2d");
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;

let pieces=[];

function startConfetti(){
for(let i=0;i<150;i++){
pieces.push({
x:Math.random()*canvas.width,
y:-20,
size:Math.random()*8+4,
speed:Math.random()*3+2
});
}
animateConfetti();
}

function animateConfetti(){
ctx.clearRect(0,0,canvas.width,canvas.height);
pieces.forEach(p=>{
p.y+=p.speed;
ctx.fillRect(p.x,p.y,p.size,p.size);
});
requestAnimationFrame(animateConfetti);
}

// start
syncTime().then(()=>{
updateCountdown();
});

</script>

</body>
</html>
